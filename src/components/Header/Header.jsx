import { ROUTES } from "../../routes/routes";
import { Link } from "react-router-dom";
import { useState } from "react";
import styles from "../../styles/header.module.scss";
import { useCart } from "../Cart/CartContext";
import Cart from "../Cart/Cart";

const Header = () => {
  const [isOpen, setIsOpen] = useState(false);
  const { cart } = useCart();
  let [active, setActive] = useState(false);
  const itemCount = cart.items.reduce(
    (total, item) => total + item.quantity,
    0
  );

  const openCart = () => {
    setIsOpen(true);
  };

  const closeCart = () => {
    setIsOpen(false);
  };

  return (
    <>
      <div className={styles.header}>
        <div className={styles.container}>
          <Link className={styles.logo__container} to={ROUTES.HOME}>
            <div className={styles.logo}>
              <svg
                className={styles.svg}
                fill="#333333"
                height="200px"
                width="200px"
                version="1.1"
                id="Layer_1"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 511.933 511.933"
              >
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g
                  id="SVGRepo_tracerCarrier"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke="#CCCCCC"
                  stroke-width="1.023866"
                ></g>
                <g id="SVGRepo_iconCarrier">
                  {" "}
                  <g>
                    {" "}
                    <g>
                      {" "}
                      <g>
                        {" "}
                        <path d="M171.336,446.718c-1.198,1.198-2.45,2.313-3.728,3.385c-25.761,21.623-67.006,17.824-94.412-9.58 c-8.392-8.392-14.805-18.338-18.808-29.066c-0.817-2.188-1.541-4.407-2.153-6.655c-1.451-5.329-6.948-8.476-12.275-7.023 c-5.329,1.45-8.474,6.946-7.023,12.275c4.523,16.62,13.555,32.046,26.117,44.61c19.458,19.457,44.621,29.347,68.903,29.347 c21.347,0,42.014-7.645,57.521-23.151c3.905-3.905,3.905-10.237,0-14.143C181.572,442.814,175.242,442.814,171.336,446.718z"></path>{" "}
                        <path d="M39.458,377.089c0.814,0.204,1.631,0.301,2.435,0.301c4.479,0,8.557-3.032,9.693-7.575 c2.659-10.634,7.846-19.863,15.415-27.432c3.905-3.905,3.905-10.237,0-14.143c-3.906-3.904-10.236-3.904-14.143,0 c-10.024,10.024-17.174,22.723-20.675,36.721C30.843,370.32,34.1,375.749,39.458,377.089z"></path>{" "}
                        <path d="M500.617,65.04c0.073-2.743-0.984-5.396-2.925-7.337l-42.866-42.867c-1.94-1.939-4.556-3.021-7.337-2.925 c-2.743,0.072-5.336,1.27-7.171,3.311l-52.987,58.941c-3.097,3.446-3.371,8.476-0.904,12.201L236.88,235.911 c-14.724-9.162-30.803-14.529-46.963-15.489c-25.096-1.505-48.891,7.665-67.006,25.782c-9.667,9.666-16.928,21.534-21.263,34.667 c-22.525,0.821-50.908,6.622-71.478,27.191c-43.288,43.289-39.545,117.467,8.344,165.356 c25.532,25.531,58.53,38.515,90.342,38.514c27.856-0.002,54.805-9.961,75.015-30.17c20.571-20.57,26.371-48.951,27.191-71.478 c13.133-4.335,25.001-11.596,34.667-21.262c18.117-18.117,27.273-41.914,25.782-67.007c-0.96-16.16-6.327-32.239-15.489-46.963 l149.454-149.454c1.81,1.435,4.004,2.162,6.204,2.162c2.388,0,4.779-0.851,6.685-2.563l58.941-52.987 C499.346,70.376,500.544,67.784,500.617,65.04z M251.587,374.882c-8.872,8.871-20.187,15.126-32.723,18.086 c-4.551,1.074-7.75,5.159-7.701,9.835c0.164,16.038-2.401,45.785-21.435,64.817c-35.489,35.491-96.98,31.749-137.071-8.344 c-40.092-40.091-43.834-101.581-8.344-137.071c18.496-18.498,47.111-21.441,63.43-21.441c0.473,0,0.937,0.003,1.388,0.007 c0.034,0.001,0.069,0.001,0.104,0.001c4.632,0,8.665-3.185,9.731-7.702c2.96-12.536,9.215-23.852,18.086-32.723 c0.001,0,0.001,0,0.001,0c14.019-14.019,32.369-21.106,51.679-19.961c13.577,0.807,27.202,5.618,39.684,13.85 c5.635,3.717,11.037,8.129,16.095,13.187c5.058,5.058,9.471,10.46,13.187,16.095c8.232,12.482,13.043,26.107,13.85,39.684 C272.694,342.51,265.606,360.862,251.587,374.882z M263.917,258.873c-1.685-1.902-3.44-3.767-5.265-5.592 c-1.825-1.825-3.69-3.58-5.592-5.265l147.365-147.365l10.857,10.857L263.917,258.873z M432.672,103.422l-0.627,0.564 l-23.502-23.503l0.563-0.627l39.033-43.42l27.952,27.953L432.672,103.422z"></path>{" "}
                        <path d="M381.146,59.938c1.953,1.952,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929c3.905-3.905,3.905-10.237,0-14.143 l-4.763-4.763c-3.906-3.904-10.236-3.904-14.143,0c-3.905,3.905-3.905,10.237,0,14.143L381.146,59.938z"></path>{" "}
                        <path d="M397.815,40.886c1.953,1.953,4.513,2.93,7.072,2.93c2.559,0,5.118-0.977,7.07-2.928 c3.905-3.905,3.906-10.237,0.002-14.143l-4.763-4.764c-3.904-3.904-10.236-3.904-14.143-0.002 c-3.905,3.905-3.906,10.237-0.002,14.143L397.815,40.886z"></path>{" "}
                        <path d="M414.485,21.834c1.953,1.953,4.513,2.93,7.072,2.93c2.559,0,5.118-0.977,7.07-2.928 c3.905-3.905,3.906-10.237,0.002-14.143l-4.763-4.764c-3.905-3.904-10.237-3.904-14.143-0.002 c-3.905,3.905-3.906,10.237-0.002,14.143L414.485,21.834z"></path>{" "}
                        <path d="M509.005,88.067l-4.168-4.168c-3.906-3.904-10.236-3.904-14.143,0c-3.905,3.905-3.905,10.237,0,14.143l4.168,4.168 c1.953,1.952,4.512,2.929,7.071,2.929s5.118-0.977,7.071-2.929C512.909,98.304,512.909,91.972,509.005,88.067z"></path>{" "}
                        <path d="M485.784,100.569c-3.906-3.905-10.236-3.903-14.143,0.002c-3.904,3.906-3.903,10.237,0.002,14.143l4.168,4.167 c1.953,1.952,4.512,2.928,7.07,2.928c2.56,0,5.119-0.977,7.072-2.93c3.904-3.906,3.903-10.237-0.002-14.143L485.784,100.569z"></path>{" "}
                        <path d="M466.732,117.239c-3.907-3.905-10.237-3.903-14.143,0.002c-3.904,3.906-3.903,10.237,0.002,14.143l4.168,4.167 c1.953,1.952,4.512,2.928,7.07,2.928c2.56,0,5.119-0.977,7.072-2.93c3.904-3.906,3.903-10.237-0.002-14.143L466.732,117.239z"></path>{" "}
                        <path d="M189.242,341.74c-0.586,0-1.158,0.061-1.717,0.158c-4.703,0.815-8.283,4.906-8.283,9.842 c0,10.504-8.545,19.049-19.048,19.049c-10.504,0-19.049-8.545-19.049-19.049c0-10.503,8.545-19.048,19.049-19.048 c4.936,0,9.028-3.581,9.843-8.285c0.097-0.558,0.157-1.129,0.157-1.715c0-5.522-4.478-10-10-10 c-21.531,0-39.049,17.517-39.049,39.048s17.518,39.049,39.049,39.049s39.048-17.518,39.048-39.049 C199.242,346.217,194.763,341.74,189.242,341.74z"></path>{" "}
                      </g>{" "}
                    </g>{" "}
                  </g>{" "}
                </g>
              </svg>
            </div>

            <p className={styles.logoname}>Frisson</p>
          </Link>

          <div className={styles.menu}>
            <Link className={styles.link} to={ROUTES.HOME}>
              Головна
            </Link>
            <Link className={styles.link} to={ROUTES.GUITARS}>
              Магазин
            </Link>
            <Link className={styles.link} to={ROUTES.ABOUT}>
              Про нас
            </Link>
            <Link className={styles.link} to={ROUTES.CONNECT}>
              Зв'язатися з нами
            </Link>
          </div>

          <div onClick={openCart} className={styles.cart}>
            <svg
              width="100%"
              height="100%"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5.00014 14H18.1359C19.1487 14 19.6551 14 20.0582 13.8112C20.4134 13.6448 20.7118 13.3777 20.9163 13.0432C21.1485 12.6633 21.2044 12.16 21.3163 11.1534L21.9013 5.88835C21.9355 5.58088 21.9525 5.42715 21.9031 5.30816C21.8597 5.20366 21.7821 5.11697 21.683 5.06228C21.5702 5 21.4155 5 21.1062 5H4.50014M2 2H3.24844C3.51306 2 3.64537 2 3.74889 2.05032C3.84002 2.09463 3.91554 2.16557 3.96544 2.25376C4.02212 2.35394 4.03037 2.48599 4.04688 2.7501L4.95312 17.2499C4.96963 17.514 4.97788 17.6461 5.03456 17.7462C5.08446 17.8344 5.15998 17.9054 5.25111 17.9497C5.35463 18 5.48694 18 5.75156 18H19M7.5 21.5H7.51M16.5 21.5H16.51M8 21.5C8 21.7761 7.77614 22 7.5 22C7.22386 22 7 21.7761 7 21.5C7 21.2239 7.22386 21 7.5 21C7.77614 21 8 21.2239 8 21.5ZM17 21.5C17 21.7761 16.7761 22 16.5 22C16.2239 22 16 21.7761 16 21.5C16 21.2239 16.2239 21 16.5 21C16.7761 21 17 21.2239 17 21.5Z"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <div className={styles.count}>{itemCount}</div>
          </div>

          <div
            onClick={() => {
              if (active === false) setActive((active = true));
              else if (active === true) setActive((active = false));
            }}
            className={styles.burger}
          >
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
      </div>

      <div className={active ? styles.burger__menu : styles.burger__menu__dis}>
        <div className={styles.burger__links}>
          <Link
            onClick={() => {
              setActive((active = false));
            }}
            className={styles.link}
            to={ROUTES.HOME}
          >
            Головна
          </Link>
          <Link
            onClick={() => {
              setActive((active = false));
            }}
            className={styles.link}
            to={ROUTES.GUITARS}
          >
            Магазин
          </Link>
          <Link
            onClick={() => {
              setActive((active = false));
            }}
            className={styles.link}
            to={ROUTES.ABOUT}
          >
            Про нас
          </Link>
          <Link
            onClick={() => {
              setActive((active = false));
            }}
            className={styles.link}
            to={ROUTES.CONNECT}
          >
            Зв'язатися з нами
          </Link>
          <p
            onClick={() => {
              openCart();
              setActive((active = false));
            }}
            className={styles.link}
          >
            Кошик
          </p>
        </div>
      </div>

      <Cart
        className={isOpen ? styles.cartBox__active : styles.cartBox__dis}
        onClose={closeCart}
        isOpen={isOpen}
      />
    </>
  );
};

export default Header;
